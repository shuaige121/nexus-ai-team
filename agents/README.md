# agents/ — Agent 工作区根目录

本目录是 AgentOffice 多 Agent 系统的 **真实工作区根目录**。每个子目录代表一个 Agent 的独立工作空间，包含其身份定义、可用工具、持久记忆和收件箱。

## 目录结构约定

```
agents/
├── scripts/              # 共享脚本（供所有 Agent 使用）
├── templates/            # JD / TOOL 模板（用于动态创建新角色）
├── <role-name>/          # 单个 Agent 的工作区
│   ├── JD.md             # 角色身份与职责定义（只读）
│   ├── TOOL.md           # 可用工具清单（只读）
│   ├── MEMORY.md         # 持久记忆（读写，有字数上限）
│   └── INBOX/            # 接收消息/邮件的目录
└── README.md             # 本文件
```

### 固定角色 vs 动态创建的角色

- **固定角色**（预置于本目录中）：
  - `ceo/` — 首席执行官，负责战略决策与任务分配
  - `hr/` — 人力资源，负责招聘、组织架构管理
  - `it-support/` — IT 支持，负责基础设施与技术运维

- **动态角色**（由 HR Agent 在运行时按需创建）：
  - `dept-xxx/` 类工程部门目录不在此预创建，而是由 HR Agent 根据业务需要动态生成
  - 动态创建的 Worker 角色会额外包含 `WORKSPACE/` 目录用于存放工作产物

## 权限设计说明

权限模型基于 Unix 文件权限，用于在文件系统层面实施 Agent 间的隔离与协作规则：

| 资源 | 权限 | 说明 |
|------|------|------|
| Agent 工作区目录 (`<role>/`) | `chmod 700` | 仅 Agent 自身可读写执行，其他 Agent 无法访问 |
| 收件箱 (`INBOX/`) | `chmod 733` | 任何 Agent 可以向其中写入文件（投递消息），但不能读取或列出已有文件 |
| 身份定义 (`JD.md`) | `chmod 444` | 所有人可读，任何人不可修改（系统管理员除外） |
| 工具清单 (`TOOL.md`) | `chmod 444` | 所有人可读，任何人不可修改（系统管理员除外） |
| 持久记忆 (`MEMORY.md`) | 默认权限 | Agent 自身可读写，受工作区目录权限保护 |
| Worker 工作区 (`WORKSPACE/`) | `chmod 700` | 仅 Worker 自身可访问，用于存放代码、文档等工作产物 |

### 设计意图

- **INBOX 的 733 权限**：实现了一个"只写信箱"模式 —— 发送方可以投递消息，但无法窥探收件人已有的消息，保障通信隐私。
- **JD.md / TOOL.md 的 444 权限**：角色定义和工具清单是系统级配置，Agent 自身不应修改自己的身份或权限。
- **工作区的 700 权限**：确保每个 Agent 的工作空间互相隔离，防止越权访问。

## 与旧 `company/agents/` 目录的关系

项目中存在的 `company/agents/` 目录是**旧版原型数据目录**，属于早期项目规划阶段的产物，包含静态的角色描述数据。

本 `agents/` 目录是**新的真实工作区**，区别如下：

| 维度 | `company/agents/`（旧） | `agents/`（新） |
|------|------------------------|----------------|
| 用途 | 原型数据 / 静态配置 | Agent 运行时工作区 |
| 内容 | 角色描述文本 | JD、工具清单、记忆、收件箱 |
| 可变性 | 静态，不随运行时变化 | 动态，Agent 在运行时读写 |
| 权限模型 | 无 | 基于 Unix 文件权限的隔离机制 |

两者将在后续迁移完成后逐步统一，届时 `company/agents/` 中的信息将被整合到新的 `agents/` 结构中。

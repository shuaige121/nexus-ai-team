# ─── NEXUS Gateway Configuration ─────────────────────────────────────────────
#
# Copy this file to .env and fill in the values you need.
# Only configure what you actually use.

# ── Server ────────────────────────────────────────────────────────────────────
HOST=0.0.0.0
PORT=8000
DEBUG=false
LOG_LEVEL=info

# ── Auth ──────────────────────────────────────────────────────────────────────
# Leave empty to disable auth (dev mode). Set a strong secret in production.
API_SECRET=
# REQUIRED: Generate a strong secret key (e.g., using: openssl rand -hex 32)
JWT_SECRET=your-strong-jwt-secret-key-here-min-32-chars
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=60

# ── Rate Limiting ─────────────────────────────────────────────────────────────
RATE_LIMIT_REQUESTS=60
RATE_LIMIT_WINDOW_SECONDS=60

# ── CORS ──────────────────────────────────────────────────────────────────────
# Comma-separated origins. Use * for dev.
CORS_ORIGINS=*

# ── Redis ─────────────────────────────────────────────────────────────────────
REDIS_URL=redis://localhost:6379/0

# ── AI Providers ──────────────────────────────────────────────────────────────
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here
OPENAI_API_KEY=sk-your-openai-api-key-here
OLLAMA_BASE_URL=http://localhost:11434

# ── LiteLLM (unified proxy) ──────────────────────────────────────────────────
LITELLM_BASE_URL=http://localhost:4000

# ── Telegram Bot ──────────────────────────────────────────────────────────────
TELEGRAM_BOT_TOKEN=your-telegram-bot-token

# ── Database ───────────────────────────────────────────────────────────────────
# REQUIRED: PostgreSQL connection URL with strong credentials
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://nexus:your-strong-db-password-here@localhost:5432/nexus

# ─── Docker Compose / Infra ────────────────────────────────────────────────
COMPOSE_PROJECT_NAME=nexus-ai-team
NEXUS_NETWORK_NAME=nexus-network
TZ=UTC

# ── PostgreSQL ─────────────────────────────────────────────────────────────
POSTGRES_IMAGE=postgres:16-alpine
POSTGRES_CONTAINER_NAME=nexus-postgres
POSTGRES_RESTART_POLICY=unless-stopped
POSTGRES_USER=nexus
POSTGRES_PASSWORD=nexus_postgres_password
POSTGRES_DB=nexus
POSTGRES_PORT=5432
POSTGRES_DATA_VOLUME=nexus_postgres_data
DB_SCHEMA_PATH=./docker/init.sql
POSTGRES_HEALTHCHECK_INTERVAL=10s
POSTGRES_HEALTHCHECK_TIMEOUT=5s
POSTGRES_HEALTHCHECK_RETRIES=5
POSTGRES_HEALTHCHECK_START_PERIOD=10s

# ── Redis ──────────────────────────────────────────────────────────────────
REDIS_IMAGE=redis:7.2-alpine
REDIS_CONTAINER_NAME=nexus-redis
REDIS_RESTART_POLICY=unless-stopped
REDIS_PORT=6379
REDIS_PASSWORD=nexus_redis_password
REDIS_APPENDONLY=yes
REDIS_SAVE_SECONDS=60
REDIS_SAVE_CHANGES=1000
REDIS_DATA_VOLUME=nexus_redis_data
REDIS_HEALTHCHECK_INTERVAL=10s
REDIS_HEALTHCHECK_TIMEOUT=5s
REDIS_HEALTHCHECK_RETRIES=5
REDIS_HEALTHCHECK_START_PERIOD=5s

# ── Main App Service (Gateway) ────────────────────────────────────────────
APP_CONTAINER_NAME=nexus-gateway
APP_RESTART_POLICY=unless-stopped
APP_WORKDIR=/app
APP_ENV=production
APP_HOST=0.0.0.0
APP_PORT=8000
APP_SOURCE_PATH=.
APP_DATABASE_URL=postgresql+psycopg://nexus:nexus_postgres_password@postgres:5432/nexus
APP_REDIS_URL=redis://:nexus_redis_password@redis:6379/0

# ── Docker Build ───────────────────────────────────────────────────────────
# Build target: 'production' or 'development'
DOCKER_BUILD_TARGET=production
DASHBOARD_BUILD_TARGET=production
VERSION=latest
# Volume mode: 'ro' (read-only) for production, 'rw' (read-write) for development
VOLUME_MODE=ro

# ── Dashboard ──────────────────────────────────────────────────────────────
DASHBOARD_PORT=3000
VITE_API_URL=http://localhost:8000
NODE_ENV=production
